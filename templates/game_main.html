<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1920, height=1080, initial-scale=1.0">
    <title>erArk - Web模式</title>
    <link rel="stylesheet" href="/static/css/game_main.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <div id="game-container">
        <!-- 面板选项卡栏 -->
        <div id="panel-tabs">
            <div class="tab-container">
                <!-- 选项卡将由JavaScript动态渲染 -->
            </div>
        </div>

        <!-- 顶部信息区 -->
        <div id="top-info-area">
            <!-- 玩家信息区（左上） -->
            <div id="player-info">
                <div class="player-name-line">
                    <span class="player-name"></span>
                    <span class="player-nickname"></span>
                    <span class="player-special-states"></span>
                </div>
                <div class="player-bars">
                    <div class="bar-container hp-bar">
                        <span class="bar-label">体力</span>
                        <div class="bar-track"><div class="bar-fill"></div></div>
                        <span class="bar-value"></span>
                    </div>
                    <div class="bar-container mp-bar">
                        <span class="bar-label">气力</span>
                        <div class="bar-track"><div class="bar-fill"></div></div>
                        <span class="bar-value"></span>
                    </div>
                    <div class="bar-container sanity-bar">
                        <span class="bar-label">理智</span>
                        <div class="bar-track"><div class="bar-fill"></div></div>
                        <span class="bar-value"></span>
                    </div>
                    <div class="bar-container semen-bar">
                        <span class="bar-label">精液</span>
                        <div class="bar-track"><div class="bar-fill"></div></div>
                        <span class="bar-value"></span>
                    </div>
                </div>
            </div>

            <!-- 交互对象附加信息区（中上） -->
            <div id="target-extra-info">
                <div class="extra-info-tabs">
                    <button class="extra-tab active" data-tab="clothing">服装</button>
                    <button class="extra-tab" data-tab="body">身体</button>
                    <button class="extra-tab" data-tab="group-sex">群交</button>
                    <button class="extra-tab" data-tab="hidden-sex">隐奸</button>
                </div>
                <div class="extra-info-content">
                    <div class="extra-panel" id="clothing-panel"></div>
                    <div class="extra-panel" id="body-panel" style="display:none;"></div>
                    <div class="extra-panel" id="group-sex-panel" style="display:none;"></div>
                    <div class="extra-panel" id="hidden-sex-panel" style="display:none;"></div>
                </div>
            </div>

            <!-- 头像区（右上） -->
            <div id="avatar-area">
                <div class="avatar-grid">
                    <!-- 头像将由JavaScript动态渲染 -->
                </div>
                <button class="avatar-page-btn" style="display:none;">▷</button>
            </div>
        </div>

        <!-- 主画面区 -->
        <div id="main-scene">
            <!-- 背景图层 -->
            <div id="scene-background"></div>

            <!-- 交互类型栏（左侧） -->
            <div id="interaction-type-panel">
                <div class="interaction-type-list">
                    <!-- 交互类型按钮将由JavaScript动态渲染 -->
                </div>
            </div>

            <!-- 角色立绘区（中央） -->
            <div id="character-display">
                <canvas id="character-canvas"></canvas>
                <!-- 身体部位按钮层 -->
                <div id="body-part-buttons"></div>
                <!-- 指令选择菜单 -->
                <div id="instruct-menu" style="display:none;">
                    <div class="instruct-menu-list"></div>
                </div>
            </div>

            <!-- 交互对象信息区（右侧） -->
            <div id="target-info-panel">
                <div class="target-basic-info">
                    <div class="target-name-line">
                        <span class="target-name"></span>
                        <span class="target-favorability"></span>
                        <span class="target-trust"></span>
                    </div>
                    <div class="target-bars">
                        <div class="bar-container hp-bar">
                            <span class="bar-label">体力</span>
                            <div class="bar-track"><div class="bar-fill"></div></div>
                        </div>
                        <div class="bar-container mp-bar">
                            <span class="bar-label">气力</span>
                            <div class="bar-track"><div class="bar-fill"></div></div>
                        </div>
                    </div>
                    <div class="target-special-states"></div>
                </div>
                <div class="target-states">
                    <div class="states-block pleasure-states">
                        <div class="states-title">快感状态</div>
                        <div class="states-grid"></div>
                    </div>
                    <div class="states-block other-states">
                        <div class="states-title">其他状态</div>
                        <div class="states-grid"></div>
                    </div>
                </div>
            </div>

            <!-- 部位提示框 -->
            <div id="body-part-tooltip" style="display:none;"></div>
        </div>

        <!-- 对话框区域 -->
        <div id="dialog-box" style="display:none;">
            <div class="dialog-speaker"></div>
            <div class="dialog-text"></div>
            <div class="dialog-indicator">▼</div>
        </div>

        <!-- 数值变化显示层 -->
        <div id="value-change-layer"></div>
    </div>

    <!-- 引入JavaScript模块 -->
    <script src="/static/js/websocket_handler.js"></script>
    <script src="/static/js/ui_components.js"></script>
    <script src="/static/js/game_renderer.js"></script>
    <script src="/static/js/interaction_manager.js"></script>
    <script>
        // 初始化游戏
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化WebSocket连接
            WebSocketHandler.init();
            // 初始化UI组件
            UIComponents.init();
            // 初始化游戏渲染器
            GameRenderer.init();
            // 初始化交互管理器
            InteractionManager.init();
        });
    </script>
</body>
</html>
