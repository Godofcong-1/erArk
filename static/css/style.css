@font-face {
    font-family: 'SarasaMonoSC';
    src: url('./fonts/等距更纱黑体.ttf') format('truetype');
    font-display: swap;
}

@font-face {
    font-family: 'EmojiSupport';
    src: url('./fonts/emoji.ttf') format('truetype');
    font-display: swap;
    /* 限制emoji字体只用于真正的emoji，避免影响Box Drawing字符 */
    unicode-range: U+1F000-1F9FF, U+1FA70-1FAFF;
}

/**
 * 游戏主要CSS样式
 * 定义游戏界面的视觉外观
 */

body {
    /* 基础样式设置 */
    background-color: #0a0a0a;
    background-image: repeating-linear-gradient(
        45deg,
        #0a0a0a 0px,
        #0a0a0a 4px,
        #111 4px,
        #111 8px
    );
    color: #c8c8c8;
    font-family: 'SarasaMonoSC', 'EmojiSupport', '等距更纱黑体 SC', 'Sarasa Mono SC', 'Menlo', 'PingFang HK', monospace;
    margin: 0;
    padding: 0;
    line-height: 1.1; /* 基础行高设置 */
    margin: 0.2em 0; /* 上下边距 */
}

/* 游戏包装容器 */
.game-wrapper {
    width: 90vw;
    margin: 0 5vw; /* 左右边距固定为各5%窗口宽度 */
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    scroll-behavior: smooth; /* 添加平滑滚动效果 */
    box-sizing: border-box; /* 确保padding不影响总宽度 */
}

.console-output {
    font-family: 'EmojiSupport', '等距更纱黑体 SC', SimHei, sans-serif;
}

/* 通用隐藏类 */
.hidden {
    display: none !important; /* 使用 important 确保覆盖其他样式 */
}

/* 游戏头部区域 */
.game-header {
    padding: 10px 20px;
    background-color: transparent;
    border-bottom: 1px solid #333;
    transition: transform 0.3s ease; /* 添加缩放动画 */
    transform-origin: top center; /* 确保缩放从顶部中心开始 */
}

.game-header h1 {
    margin: 0;
    font-size: 1.5em;
    color: #ffd700; /* 金色标题 */
    text-align: center;
}

/* 游戏主容器 */
.game-container {
    background-color: #000;
    padding: 15px;
    border: 1px solid #333;
    flex-grow: 1;
    min-height: 600px;
    max-height: 80vh; /* 添加最大高度限制，确保在大屏幕上也能正常滚动 */
    white-space: pre-wrap;
    line-height: 0.2em;
    overflow-y: auto;
    position: relative;
    scroll-behavior: smooth; /* 添加平滑滚动效果 */
    will-change: transform; /* 优化性能 */
    transition: transform 0.3s ease; /* 添加缩放动画 */
    transform-origin: top center; /* 确保缩放从顶部中心开始 */
}

/**
 * 游戏内容容器样式，确保内部内容正确渲染和滚动
 */
.game-content {
    width: 100%;
    height: auto;
    position: relative;
}

/* 加载指示器 */
.loading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #666;
    font-size: 1.2em;
}

/* 游戏底部区域 */
.game-footer {
    padding: 10px;
    background-color: transparent;
    border-top: 1px solid #333;
    text-align: center;
    font-size: 0.8em;
    color: #666;
    transition: transform 0.3s ease; /* 添加缩放动画 */
    transform-origin: bottom center; /* 确保缩放从底部中心开始 */
}

/* 文本样式 */
.text {
    line-height: 1.1;
    margin: 0.1em 0;
    display: inline-block; /* 修改：改为内联块显示，允许元素显示在同一行 */
    white-space: pre-wrap; /* 保留空格和换行符 */
}

/* 块级文本样式 - 需要单独一行的文本 */
.text.block {
    display: block;
    width: 100%;
}

/* 专门用于处理换行符的样式类 */
.text-break {
    display: block;
    width: 100%;
    margin: 0;
    height: 0;
    line-height: 0;
    content: "";
    clear: both;
    flex-basis: 100%;
}

/* 用于连续换行符或“文本末尾+line_feed”的特殊样式 - 添加额外空间 */
.text-break.extra-space {
    margin: 0.1em 0; /* 与普通文本相同的上下间距 */
    height: 1.1em; /* 与正文行高保持一致 */
    line-height: 1.1;
}

/* 对于需要内联显示的文本添加新的样式类 */
.text-inline {
    display: inline-block;
    white-space: pre-wrap; /* 保留空格和换行符 */
}

/* 增加多行文本内部行间距的样式 - 只对包含换行符的多行文本生效 */
.text.text-inline {
    white-space: pre-wrap; /* 保持换行符和空格 */
}

/* 使用CSS的:has()伪类选择器（仅在支持的浏览器中生效）或JavaScript来处理 */
/* 由于CSS无法直接检测文本内容是否包含换行符，我们使用JavaScript方案 */
.text.text-inline.multi-line {
    line-height: 1.4; /* 只对标记为多行的元素增加行间距 */
}

/* 按钮样式 */
.button {
    background-color: #222;
    border: 1px solid #444;
    color: #fff;
    padding: 5px 10px;
    margin: 0.2em;
    cursor: pointer;
    border-radius: 3px;
    display: inline-block;
    transition: background-color 0.2s;
}

.button:hover {
    background-color: #333;
    border-color: #666;
}

.button:active {
    background-color: #444;
}

/* 游戏内容区域中的按钮样式 */
.game-button {
    background-color: #222;
    border: 1px solid #444;
    color: #fff;
    padding: 0.2em 0.5em;
    margin: 0.2em;
    cursor: pointer;
    border-radius: 3px;
    display: inline-block; /* 修改：改为内联块显示，允许按钮与其他元素显示在同一行 */
    transition: background-color 0.2s;
    font-size: inherit; /* 新增：确保字体大小与周围文本一致 */
    line-height: 1.1;
}

.game-button.inline-button {
    padding: 0 0.5em;
    height: 1.1em;
    line-height: 1.1;
    margin-top: 0;
    margin-bottom: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* 块级按钮样式 - 需要单独一行的按钮 */
.game-button.block {
    display: block;
    width: 100%;
}

.game-button:hover {
    background-color: #333;
    border-color: #666;
}

.game-button:active {
    background-color: #444;
}

/* 游戏内容区域中的地图按钮样式 */
.map-button {
    cursor: pointer;
    display: inline;
    padding: 0;
    margin: 0;
    border: none;
    background: none;
    color: inherit;
    font: inherit;
    line-height: 1.1;
    white-space: pre;
    min-width: 0;
    transition: color 0.2s ease;
}

.map-button:hover {
    color: #f2d39a;
}

.map-button:active {
    color: #ffd700;
}

.map-button:focus-visible {
    outline: 1px solid #4a90e2;
    outline-offset: 1px;
}

/* 内联元素容器 - 用于包裹需要在同一行显示的多个元素 */
.inline-container {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    }

.inline-container.map-line {
    display: block;
    width: max-content;
    white-space: pre;
    font-family: 'SarasaMonoSC', '等距更纱黑体 SC', 'Sarasa Mono SC', 'Menlo', 'Consolas', monospace;
    overflow: visible;
    touch-action: manipulation;
    margin-left: auto;
    margin-right: auto;
    box-sizing: border-box;
    /* 改善字符宽度一致性 */
    font-kerning: none;
    font-variant-ligatures: none;
    text-rendering: geometricPrecision;
    line-height: 1.2;
    /* 确保文本左对齐 */
    text-align: left;
}

.inline-container.map-line .map-element {
    display: inline;
    white-space: pre;
    font-family: inherit;
    letter-spacing: 0;
    /* 改善字符宽度一致性 */
    font-kerning: none;
    font-variant-ligatures: none;
}

.inline-container.map-line .map-text {
    line-height: 1.1;
}

.inline-container.map-line .map-button {
    margin: 0;
}

.inline-container.map-line .map-padding {
    display: none;
}

.inline-container.map-line .map-fill {
    display: inline-block;
    white-space: pre;
    pointer-events: none;
}

.map-group {
    display: block;
    width: 100%;
    text-align: center;
}

.map-group-inner {
    display: inline-block;
    text-align: left;
}

.inline-container .text-inline {
    display: inline-block;
    line-height: 1.1;
    vertical-align: middle;
}

/* 按钮容器样式（此容器现在被隐藏，按钮直接显示在game-content中） */
.game-buttons {
    margin-top: 10px;
    text-align: left;
}

.game-buttons.hidden {
    display: none;
}

/* 标题样式 */
.title {
    font-size: 1.5em;
    margin: 10px 0;
    padding-bottom: 5px;
    border-bottom: 1px solid #444;
    color: #ffd700; /* 金色 */
    width: 100%;
    text-align: center;
}

/* 分隔线样式 */
.line {
    border: 0;
    height: 1px;
    background-color: #444;
    margin: 10px 0;
    width: 100%;
}

/* 等待文本样式 */
.wait-text {
    margin: 15px 0;
    cursor: pointer;
    padding: 5px;
    border: 1px dashed #333;
    background-color: rgba(0, 0, 0, 0.3);
    width: 100%;
}

.wait-text:hover {
    background-color: #222;
}

.wait-text.waiting-active {
    border-color: #4a90e2;
    background-color: rgba(30, 60, 100, 0.45);
}

.wait-text.waiting-submitted {
    opacity: 0.8;
}

.wait-text.wait-text-resolved {
    cursor: default;
    border-style: solid;
    opacity: 0.8;
}

.continue-hint {
    color: #999;
    font-size: 0.8em;
    text-align: right;
    margin-top: 5px;
    font-style: italic;
}

.continue-hint.active {
    color: #f2d39a;
}

.continue-hint.completed {
    display: none;
}

/* 特殊文本样式 */
.gold_enrod {
    color: #ffd700;
}

.red {
    color: #ff4d4d;
}

.deep_gray {
    color: #666;
}

.green {
    color: #4dff4d;
}

.blue {
    color: #4d4dff;
}

.normal {
    /* 默认文本样式 */
    color: #fff;
}

.onbutton {
    background-color: #333;
    padding: 2px 5px;
    border-radius: 3px;
}

/* 按钮位置样式 */
.left-button {
    display: block;
    text-align: left;
}

.center-button {
    display: block;
    margin-left: auto;
    margin-right: auto;
    text-align: center;
}

/* 状态等级文本样式 */
.status-level {
    font-weight: bold;
    padding: 0 3px;
}

.levelz {
    color: #777; /* 灰色，表示Z级 */
}

.levelf {
    color: #a6a6ff; /* 浅蓝色，表示F级 */
}

.levele {
    color: #86c5ff; /* 天蓝色，表示E级 */
}

.leveld {
    color: #66ff66; /* 浅绿色，表示D级 */
}

.levelc {
    color: #ffff66; /* 浅黄色，表示C级 */
}

.levelb {
    color: #ffb866; /* 橙色，表示B级 */
}

.levela {
    color: #ff6666; /* 红色，表示A级 */
}

.levels {
    color: #ff66ff; /* 粉色，表示S级 */
}

.levelex {
    color: #ffd700; /* 金色，表示EX级 */
    text-shadow: 0 0 3px #ffd700;
}

/* 游戏图片样式 */
.game-image {
    max-width: 100%;
    height: auto;
    vertical-align: middle;
    margin: 2px;
    /* 确保图片加载完成后能触发重新滚动 */
    transition: height 0.01s ease;
}

/* 比例条容器样式 */
.bar-container {
    display: inline-flex;
    justify-content: flex-start;
    margin: 2px 0;
}
/* 比例条元素样式 */
.bar-item {
    display: inline-block;
    height: 15px; /* 默认高度 */
    vertical-align: middle;
    margin: 0 auto;
}

/* 人物图片容器样式 */
.character-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 10px 0;
    width: 100%;
}
/* 人物图片元素样式 */
.character-item {
    max-width: 100%;
    height: auto;
    /* 确保图片加载完成后能触发重新滚动 */
    transition: height 0.01s ease;
}

/* 带有文本和数值描述的比例条容器样式 */
.info-bar-container {
    display: flex;
    align-items: center;
    margin: 2px 0;
    flex-wrap: wrap;
}

/* 带有文本和数值描述的比例条文本样式 */
.info-bar-text {
    margin: 0 2px;
}

/* 带有文本和数值描述的比例条样式 */
.info-bar-items {
    display: inline-flex;
    align-items: center;
}

/* 带有文本的人物图像容器样式 */
.info-character-container {
    display: flex;
    align-items: center;
    margin: 5px 0;
    flex-wrap: wrap;
}

/* 带有文本的人物图像文本样式 */
.info-character-text {
    margin: 0 2px;
}

/* 带有文本的人物图像比例条样式 */
.info-character-bar {
    display: inline-flex;
    align-items: center;
}

/* 图片按钮样式 */
.image-button {
    background-color: transparent;
    border: none;
    padding: 0;
    margin: 2px;
    cursor: pointer;
    display: inline-block;
    transition: transform 0.2s;
}

.image-button:hover {
    transform: scale(1.05);
}

.image-button:active {
    transform: scale(0.95);
}

.image-button img {
    max-width: 100%;
    height: auto;
    vertical-align: middle;
}

/* 居中图片容器样式 */
.center-image-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    margin: 5px 0;
}

/* 居中图片样式 */
.center-image {
    max-width: 100%;
    height: auto;
    /* 确保图片加载完成后能触发重新滚动 */
    transition: height 0.01s ease;
}

/**
 * 滚动指示器样式
 * 当新内容添加但用户未滚动到底部时显示
 */
.scroll-indicator {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 5px 10px;
    border-radius: 5px;
    border: 1px solid #666;
    z-index: 1000;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
    animation: pulse 1.5s infinite;
    font-size: 0.9em;
    opacity: 0.8;
    transition: opacity 0.3s;
}

.scroll-indicator:hover {
    opacity: 1;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/**
 * 滚动按钮样式
 * 提供手动滚动到底部的按钮
 */
.scroll-button {
    background-color: #333;
    color: #fff;
    border: 1px solid #555;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
    margin: 5px;
    transition: background-color 0.2s;
}

.scroll-button:hover {
    background-color: #444;
}

/* Persistent Input Area Styling */
#persistent-input-container {
    padding: 5px;
    background-color: #1a1a1a; /* Slightly different background for the input area */
    display: flex;
    align-items: center;
    justify-content: center;
    border-top: 1px solid #333;
}

#persistent-input {
    flex-grow: 1;
    max-width: 600px; /* Limit width */
    padding: 8px;
    border: 1px solid #444;
    background-color: #222;
    color: #fff;
    border-radius: 3px;
    margin-right: 5px;
}

#persistent-submit-button {
    padding: 8px 15px;
    background-color: #333;
    color: #fff;
    border: 1px solid #555;
    border-radius: 3px;
    cursor: pointer;
    transition: background-color 0.2s;
}

#persistent-submit-button:hover {
    background-color: #444;
}

/* 缩放控制面板样式 */
.scale-control-container {
    padding: 5px;
    background-color: #1a1a1a;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    border-top: 1px solid #333;
    flex-wrap: wrap;
}

.scale-label {
    color: #c8c8c8;
    font-size: 0.9em;
    margin-right: 5px;
}

.scale-button {
    padding: 4px 8px;
    background-color: #333;
    color: #fff;
    border: 1px solid #555;
    border-radius: 3px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 0.8em;
    min-width: 30px;
}

.scale-button:hover {
    background-color: #444;
}

.scale-button:active {
    background-color: #555;
}

.scale-button.toggle-btn.active {
    background-color: #4a9eff;
    border-color: #4a9eff;
}

.scale-display {
    color: #ffd700;
    font-weight: bold;
    font-size: 0.9em;
    min-width: 45px;
    text-align: center;
    padding: 2px 5px;
    background-color: rgba(255, 215, 0, 0.1);
    border-radius: 3px;
    border: 1px solid rgba(255, 215, 0, 0.3);
}

/* 横屏提示覆盖层 */
.landscape-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.95);
    color: #fff;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    font-family: '等距更纱黑体 SC', SimHei, sans-serif;
    text-align: center;
    padding: 20px;
}

.landscape-overlay h2 {
    color: #ffd700;
    margin-bottom: 20px;
    font-size: 1.5em;
}

.landscape-overlay p {
    margin-bottom: 15px;
    line-height: 1.4;
    color: #c8c8c8;
}

.landscape-overlay .rotate-icon {
    font-size: 3em;
    margin: 20px 0;
    animation: rotateIcon 2s ease-in-out infinite;
    color: #ffd700;
}

@keyframes rotateIcon {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(90deg); }
}

/* 响应式设计 */
@media (max-width: 768px) {
    .game-container {
        padding: 10px;
    }
    
    .button {
        display: block;
        width: 100%;
        box-sizing: border-box;
        margin: 5px 0;
    }
    
    /* 在小屏幕设备上隐藏缩放控制面板 */
    .scale-control-container {
        display: none;
    }
}

/* 工具提示气泡样式：定义悬浮提示的基础外观 */
.tooltip-layer {
    position: fixed;
    z-index: 2000;
    pointer-events: none;
    max-width: 320px;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 0.875rem;
    line-height: 1.3;
    background: rgba(17, 24, 39, 0.92);
    color: #f9fafb;
    box-shadow: 0 10px 30px rgba(15, 23, 42, 0.4);
    opacity: 0;
    visibility: hidden;
    transform: translate3d(0, 10px, 0);
    transition: opacity 120ms ease-out, transform 120ms ease-out, visibility 120ms ease-out;
    white-space: normal;
    word-break: break-word;
    letter-spacing: 0.02em;
}

.tooltip-layer.visible {
    opacity: 1;
    visibility: visible;
    transform: translate3d(0, 0, 0);
}

.tooltip-layer.visible {
    /* 显示状态下逐渐淡入，同时取消向下偏移 */
    opacity: 1;
    visibility: visible;
    transform: translate3d(0, 0, 0);
}

/* 移动设备特定样式 */
@media screen and (max-width: 1024px) and (orientation: portrait) {
    /* 在移动设备竖屏模式下显示横屏提示 */
    .landscape-overlay.show-for-mobile {
        display: flex;
    }
    
    /* 隐藏主要游戏内容 */
    .game-wrapper.hide-for-portrait {
        display: none;
    }
}

/* 平板设备特定样式 */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
    /* 在平板设备竖屏模式下显示横屏提示 */
    .landscape-overlay.show-for-tablet {
        display: flex;
    }
    
    /* 隐藏主要游戏内容 */
    .game-wrapper.hide-for-portrait {
        display: none;
    }
}

/* 手机设备特定样式 */
@media screen and (max-width: 767px) and (orientation: portrait) {
    /* 在手机竖屏模式下显示横屏提示 */
    .landscape-overlay.show-for-phone {
        display: flex;
    }
    
    /* 隐藏主要游戏内容 */
    .game-wrapper.hide-for-portrait {
        display: none;
    }
}

/* ========== 新UI容器样式（IN_SCENE面板） ========== */
.new-ui-container {
    width: 100%;
    min-height: 600px;
    background-color: #0a0a0a;
    background-image: repeating-linear-gradient(
        45deg,
        rgba(26, 26, 46, 1) 0px,
        rgba(26, 26, 46, 1) 20px,
        rgba(22, 33, 62, 0.8) 20px,
        rgba(22, 33, 62, 0.8) 40px
    );
    border-radius: 4px;
    overflow: hidden;
}

.new-ui-layout {
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: 8px;
}

/* 顶部信息区 */
.new-ui-top-info {
    display: flex;
    gap: 16px;
    padding: 8px;
    background-color: rgba(0, 0, 0, 0.6);
    border-bottom: 1px solid #333;
    overflow: visible;  /* 允许子元素溢出，避免对话框被截断 */
    position: relative;
    z-index: 20;  /* 确保对话框在主场景上方 */
}

/* 玩家信息面板 */
.new-ui-player-info {
    flex: 0 0 auto;
    width: 200px;  /* 固定宽度，缩小一半 */
    min-width: 180px;
    padding: 12px 8px 8px 8px;  /* 增加顶部内边距，让玩家姓名和边缘有空隙 */
    background-color: rgba(30, 30, 40, 0.8);
    border-radius: 4px;
    position: relative;  /* 为浮动文本提供定位上下文 */
}

.player-name-line {
    margin-bottom: 12px;  /* 增加下边距，让姓名和体力行之间有更多空隙 */
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 4px;
}

.player-name {
    font-size: 1.2em;
    color: #ffd700;
    font-weight: bold;
}

/* 玩家名字按钮样式 - 点击后触发"与自己交互"指令 */
.player-name-btn {
    font-size: 1.2em;
    color: #ffd700;
    font-weight: bold;
    background-color: #3a3a4a;
    border: 1px solid #ffd700;
    border-radius: 4px;
    padding: 2px 8px;
    cursor: pointer;
    transition: all 0.15s;
}

.player-name-btn:hover {
    background-color: #4a4a5a;
    box-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
}

.player-nickname {
    color: #888;
    margin-left: 8px;
}

/* 玩家特殊状态标记行 - 单独一行显示 */
.player-special-states-row {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    padding: 4px 0;
    margin-top: 4px;
    border-top: 1px solid #333;
}

.player-special-states-row .special-state {
    font-size: 0.85em;
}

.player-bars {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

/* 状态条样式 */
.status-bar {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9em;
    position: relative;  /* 为浮动文本提供定位上下文 */
}

.status-bar .bar-label {
    width: 40px;
    min-width: 32px;
    color: #aaa;
    font-size: 0.9em;
}

/* 状态栏标签容器（包含标签和快捷按钮） */
.bar-label-container {
    display: flex;
    align-items: center;
    gap: 2px;
    min-width: 40px;
}

/* 快速使用药剂按钮 */
.bar-quick-use-btn {
    padding: 0;
    width: 14px;
    height: 14px;
    background-color: rgba(100, 100, 120, 0.5);
    border: 1px solid #666;
    border-radius: 2px;
    color: #fff;
    font-size: 10px;
    line-height: 1;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.bar-quick-use-btn:hover {
    background-color: rgba(120, 120, 140, 0.8);
    border-color: #888;
    transform: scale(1.1);
}

.bar-quick-use-btn:active {
    transform: scale(0.95);
}

/* 理智药快捷按钮样式 */
.bar-quick-use-sanity {
    border-color: #7070C0;
}

.bar-quick-use-sanity:hover {
    background-color: rgba(112, 112, 192, 0.8);
    border-color: #8080D0;
}

/* 精力剂快捷按钮样式 */
.bar-quick-use-semen {
    border-color: #fffacd;
}

.bar-quick-use-semen:hover {
    background-color: rgba(255, 250, 205, 0.3);
    border-color: #ffffe0;
}

/* 玩家信息区的状态条：使用CSS绘制（明日方舟风格） */
.new-ui-player-info .status-bar .bar-track {
    flex: 1;
    height: 10px;
    background-color: rgba(40, 40, 40, 0.8);
    transform: skewX(-20deg);
    border: 1px solid rgba(255, 255, 255, 0.15);
    position: relative;
    overflow: hidden;
}

.new-ui-player-info .status-bar .bar-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    transition: width 0.3s ease;
}

/* HP槽颜色 */
.new-ui-player-info .status-bar-hp .bar-track { background-image: none; }
.new-ui-player-info .status-bar-hp .bar-fill {
    background-color: #e15a5a;
    background-image: none;
}

/* MP槽颜色 */
.new-ui-player-info .status-bar-mp .bar-track { background-image: none; }
.new-ui-player-info .status-bar-mp .bar-fill {
    background-color: #70C070;
    background-image: none;
}

/* 理智槽颜色 */
.new-ui-player-info .status-bar-sanity .bar-track { background-image: none; }
.new-ui-player-info .status-bar-sanity .bar-fill {
    background-color: #7070C0;
    background-image: none;
}

/* 精液槽颜色 */
.new-ui-player-info .status-bar-semen .bar-track { background-image: none; }
.new-ui-player-info .status-bar-semen .bar-fill {
    background-color: #fffacd;
    background-image: none;
}

.status-bar .bar-value {
    width: 60px;
    min-width: 70px;
    text-align: right;
    color: #ccc;
    font-size: 0.85em;
}

/* 交互对象附加信息面板 - 外层容器保持flex布局中的位置 */
.new-ui-target-extra-info {
    flex: 1;
    padding: 0; /* 移除padding，由内部容器处理 */
    background-color: transparent; /* 背景由内部容器处理 */
    border-radius: 4px;
    max-height: 124px; /* 在flex布局中占据的固定高度，与玩家信息区高度匹配 */
    overflow: visible; /* 允许内容向下溢出 */
    line-height: 1.6;
    position: relative; /* 为内部绝对定位提供定位上下文 */
    z-index: 10;
}

.extra-info-placeholder {
    color: #666;
    text-align: center;
    padding: 16px;
    background-color: rgba(30, 30, 40, 0.8);
    border-radius: 4px;
}

/* 内部容器 - 实际承载内容和样式 */
.extra-info-container {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 8px;
    background-color: rgba(30, 30, 40, 0.8);
    border-radius: 4px;
    max-height: 126px; /* 150px - 8px*2 padding */
    overflow: hidden; /* 不显示滚动条 */
    position: relative; /* 初始相对定位 */
    transition: box-shadow 0.3s ease;
}

/* 悬停时内部容器扩展 - 使用绝对定位脱离文档流 */
.new-ui-target-extra-info:hover .extra-info-container {
    position: absolute; /* 脱离文档流，不影响布局 */
    top: 0;
    left: 0;
    right: 0;
    max-height: 800px; /* 足够大以显示所有内容 */
    overflow-y: auto; /* 内容太多时显示滚动条 */
    z-index: 100; /* 覆盖其他内容 */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8); /* 阴影突出浮动效果 */
}

/* 顶部按钮栏 */
.extra-info-button-bar {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    padding-bottom: 4px;
    border-bottom: 1px solid #444;
    margin-bottom: 4px;
    justify-content: space-between;
    align-items: center;
}

.extra-info-tab-btn {
    padding: 2px 8px;
    background-color: #333;
    color: #aaa;
    border: 1px solid #555;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85em;
    transition: all 0.2s;
}

.extra-info-tab-btn:hover {
    background-color: #444;
    color: #fff;
}

.extra-info-tab-btn.active {
    background-color: #555;
    color: #ffd700;
    border-color: #ffd700;
}

.extra-info-toggle-btn {
    padding: 2px 8px;
    background-color: #2a2a3a;
    color: #8af;
    border: 1px solid #448;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.8em;
}

.extra-info-toggle-btn:hover {
    background-color: #3a3a4a;
}

/* 内容区域 */
.extra-info-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.extra-info-section {
    padding: 4px 0;
    line-height: 1.5;
}

.section-title {
    color: #ffd700;
    font-weight: bold;
    font-size: 0.9em;
    margin-bottom: 2px;
}

.section-empty {
    color: #666;
    font-size: 0.85em;
}

/* 服装栏 */
.clothing-section .clothing-items {
    display: flex;
    flex-wrap: wrap;
    gap: 4px 8px;
}

.clothing-group {
    display: inline-flex;
    flex-wrap: wrap;
    align-items: center;
    margin-right: 8px;
}

.clothing-type-label {
    color: #aaa;
    font-size: 0.9em;
}

.clothing-name {
    color: #ccc;
    font-size: 0.9em;
}

.clothing-vacuum {
    color: #f88;
    font-size: 0.9em;
}

.clothing-button {
    background-color: #3a3a4a;
    color: #8cf;
    border: 1px solid #558;
    border-radius: 3px;
    padding: 1px 4px;
    cursor: pointer;
    font-size: 0.85em;
    transition: all 0.15s;
}

.clothing-button:hover {
    background-color: #4a4a5a;
    border-color: #88f;
}

.clothing-off-btn {
    color: #888;
    border-color: #444;
}

.clothing-dirty {
    font-size: 0.85em;
}

.clothing-off {
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px dashed #444;
}

.clothing-off-label {
    color: #888;
    font-size: 0.9em;
}

.clothing-off-name {
    color: #888;
}

.clothing-naked {
    color: #f88;
    font-size: 0.9em;
}

/* 身体栏 */
.body-section .body-content {
    display: flex;
    flex-wrap: wrap;
    gap: 2px 6px;
}

/* 身体部位分组 - 使用inline显示，让名称和内容在同一行 */
.body-part-group {
    display: inline;
    margin-right: 8px;
}

.body-part-label {
    color: #aaa;
    font-weight: normal;
    font-size: 0.9em;
}

.body-text, .body-extra {
    font-size: 0.9em;
    margin-left: 2px;
}

.body-h-item {
    color: #f8a;
    font-size: 0.9em;
}

/* 群交栏 */
.group-sex-section .group-sex-content {
    color: #ccc;
    font-size: 0.9em;
}

/* 隐奸栏 */
.hidden-sex-section .hidden-sex-content {
    display: flex;
    flex-wrap: wrap;
    gap: 4px 12px;
}

.hidden-level {
    color: #aaf;
    font-size: 0.9em;
}

.hidden-insert {
    color: #ccc;
    font-size: 0.9em;
}

/* 颜色类 */
.semen-color {
    color: #fff8dc;
}

.lavender-color {
    color: #e6e6fa;
}

.blood-color {
    color: #ff6b6b;
}

/* 头像面板 */
.new-ui-avatar-panel {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 8px;
    padding-bottom: 60px;  /* 为对话框预留空间 */
    background-color: rgba(30, 30, 40, 0.8);
    border-radius: 4px;
    overflow: visible;  /* 允许对话框溢出 */
    position: relative;
}

/* 头像项容器 */
.avatar-items-container {
    display: flex;
    gap: 8px;
}

.avatar-item {
    width: 48px;
    min-height: 48px;
    background-color: #333;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 4px;
    cursor: pointer;
    transition: background-color 0.2s;  /* 只过渡背景色，避免transform导致闪烁 */
    position: relative;
}

/* 使用nth-child递增z-index，让右侧对话框在上层显示 */
.avatar-items-container .avatar-item:nth-child(1) { z-index: 5; }
.avatar-items-container .avatar-item:nth-child(2) { z-index: 6; }
.avatar-items-container .avatar-item:nth-child(3) { z-index: 7; }
.avatar-items-container .avatar-item:nth-child(4) { z-index: 8; }
.avatar-items-container .avatar-item:nth-child(5) { z-index: 9; }

.avatar-item:hover {
    background-color: #444;
    /* 移除transform: scale，防止闪烁 */
}

/* 头像区分页按钮行 */
.avatar-pagination-row {
    display: flex;
    gap: 4px;
    justify-content: center;
    position: absolute;
    bottom: 8px;
    left: 0;
    right: 0;
}

/* 头像区分页按钮 */
.avatar-page-btn {
    padding: 2px 8px;
    font-size: 0.7em;
    background-color: rgba(60, 60, 80, 0.9);
    color: #ccc;
    border: 1px solid #555;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
}

.avatar-page-btn:hover {
    background-color: rgba(80, 80, 100, 0.95);
    border-color: #777;
    color: #fff;
}

.avatar-page-btn:active {
    background-color: rgba(100, 100, 120, 1);
}

/* ========== 场景内全部角色面板 ========== */
/* 遮罩层 */
.all-characters-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

/* 面板容器 */
.all-characters-panel {
    background-color: rgba(30, 30, 40, 0.95);
    border: 1px solid #555;
    border-radius: 8px;
    padding: 12px;
    max-width: 90vw;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
}

/* 标题栏 */
.all-characters-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 8px;
    border-bottom: 1px solid #444;
    margin-bottom: 8px;
}

.all-characters-title {
    font-size: 1em;
    color: #fff;
    font-weight: bold;
}

.all-characters-close-btn {
    width: 24px;
    height: 24px;
    background-color: rgba(100, 60, 60, 0.9);
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1.2em;
    line-height: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.all-characters-close-btn:hover {
    background-color: rgba(150, 60, 60, 1);
}

/* 角色网格容器（带滚动条） */
.all-characters-grid-container {
    overflow-y: auto;
    max-height: calc(6 * 70px);  /* 6行，每行约70px高度 */
}

/* 角色网格 */
.all-characters-grid {
    display: grid;
    grid-template-columns: repeat(10, 1fr);  /* 每行10个 */
    gap: 8px;
    padding: 4px;
}

/* 单个角色项 */
.all-characters-item {
    width: 56px;
    min-height: 48px;
    background-color: #333;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 4px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.all-characters-item:hover {
    background-color: #555;
}

/* 角色名称 */
.all-characters-name {
    font-size: 0.7em;
    text-align: center;
    color: #ccc;
    white-space: normal;
    word-wrap: break-word;
    word-break: break-all;
    line-height: 1.1;
}

/* 滚动条样式 */
.all-characters-grid-container::-webkit-scrollbar {
    width: 8px;
}

.all-characters-grid-container::-webkit-scrollbar-track {
    background: rgba(40, 40, 50, 0.8);
    border-radius: 4px;
}

.all-characters-grid-container::-webkit-scrollbar-thumb {
    background: rgba(100, 100, 120, 0.9);
    border-radius: 4px;
}

.all-characters-grid-container::-webkit-scrollbar-thumb:hover {
    background: rgba(120, 120, 140, 1);
}

.avatar-name {
    font-size: 0.7em;
    text-align: center;
    color: #ccc;
    overflow: visible;  /* 改为visible，允许换行 */
    white-space: normal;  /* 允许正常换行 */
    word-wrap: break-word;  /* 长单词可断行 */
    word-break: break-all;  /* CJK字符可随意断行 */
    margin-bottom: 4px;
    width: 100%;  /* 确保使用全部宽度 */
    line-height: 1.1;  /* 适当的行高 */
}

/* 头像下方的小对话框 - 漫画风格向下悬浮 */
.avatar-mini-dialog {
    position: absolute;
    top: calc(100% - 10px);  /* 向上偏移10px，避免被主场景截断 */
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7em;  /* 与角色姓名字体大小一致 */
    color: #ffcc80;
    background-color: rgba(40, 35, 25, 0.95);
    border: 1px solid #aa8844;
    border-radius: 6px;
    padding: 6px 10px;
    margin-top: 4px;
    min-width: 80px;
    max-width: 110px;  /* 限制宽度避免与相邻对话框重叠 */
    min-height: 2.8em;  /* 至少容纳两行文本 */
    max-height: 4.5em;  /* 最多显示约两行半文本 */
    text-align: center;
    white-space: normal;  /* 允许文本换行 */
    word-wrap: break-word;  /* 长词自动换行 */
    overflow: hidden;  /* 隐藏超出部分 */
    line-height: 1.3;  /* 行高设置，确保文本清晰 */
    /* z-index继承自父元素avatar-item的nth-child设置 */
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
    cursor: help;
    pointer-events: auto;  /* 确保可以触发鼠标事件和工具提示 */
}

/* 漫画风格的三角形指示器 */
.avatar-mini-dialog::before {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-bottom-color: #aa8844;
}

.avatar-mini-dialog::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 5px solid transparent;
    border-bottom-color: rgba(40, 35, 25, 0.95);
}

/* 主画面区 */
.new-ui-main-scene {
    flex: 1;
    display: flex;
    position: relative;
    min-height: 800px;
    background-color: #111;
    border-radius: 4px;
}

/* 交互类型面板（左侧） */
.new-ui-interaction-panel {
    /* 使用绝对定位，不影响其他元素的布局 */
    position: absolute;
    left: 30px;
    top: 50%;
    transform: translateY(-50%);
    /* Auto width to fit cards */
    width: auto;
    /* Reset old styles */
    padding: 0;
    background-color: transparent;
    border: none;
    overflow: visible;
    
    display: flex;
    flex-direction: column;
    justify-content: center;
    z-index: 50;
    perspective: 1000px;
    pointer-events: none; /* Layout container passes clicks */
}

.interaction-type-list {
    pointer-events: auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
    transform-style: preserve-3d;
    min-width: 140px; /* 强制宽度，防止右侧点击失效 */
    padding-right: 20px; /* 预留右侧空间 */
}

/* 交互卡片通用样式 */
.interaction-card {
    width: 120px;
    height: 70px; /* 增加高度 (原50px -> 70px, 约增加1/3) */
    background: rgba(30, 30, 40, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-left: 4px solid var(--text-secondary, #b8b8b8);
    color: var(--text-primary, #e8e8e8);
    cursor: pointer;
    position: relative;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    
    display: flex;
    flex-direction: row; /* 改为横向布局 (图标在左) */
    align-items: center;
    justify-content: flex-start; /* 左对齐 */
    padding: 0 10px;
    gap: 8px;
    
    /* 3D向中心倾斜效果 - 减小角度以修复点击区域问题 */
    /* 增加 translateZ(20px) 确保整体都在Z=0平面之前，防止旋转导致右侧深入屏幕后方无法点击 */
    transform: rotateY(10deg) translateZ(20px); 
    transform-origin: left center; /* 明确旋转轴在左侧，避免右侧向后偏移过多 */
    pointer-events: auto; /* 显式开启点击，对抗父级的 none */
    box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
    backdrop-filter: blur(5px);
    
    /* 切角效果 */
    clip-path: polygon(0 0, 100% 0, 95% 100%, 0% 100%);
}

.interaction-card:hover {
    /* 保持前移，防止Z轴跳变 */
    transform: rotateY(0deg) scale(1.05) translateX(10px) translateZ(30px);
    background: rgba(40, 40, 50, 0.95);
    border-left-color: var(--accent-color, #e94560);
    box-shadow: 10px 10px 20px rgba(0,0,0,0.6);
    z-index: 10;
}

.interaction-card.active {
    background: rgba(233, 69, 96, 0.9);
    border-left-color: #fff;
    transform: rotateY(0deg) translateX(15px) translateZ(20px);
    box-shadow: 0 0 20px rgba(233, 69, 96, 0.4);
}

.interaction-card.active.hidden-card {
    display: flex !important;
}

.interaction-card.hidden-card {
    display: none;
}

.interaction-card .icon {
    position: absolute;
    left: 5px; /* 向左移动5像素 */
    top: 50%;
    transform: translateY(-50%);
    z-index: 0; /* 图标在文本下层 */
    font-size: 50px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
    line-height: 1;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.6; /* 降低透明度，作为背景装饰 */
}

/* 交互大类图片图标样式（2026-02-13新增） */
.interaction-card .icon .interaction-icon-img {
    width: 50px;
    height: 50px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

/* 默认图标样式（无图片时的圆点） */
.interaction-card .icon .interaction-icon-default {
    font-size: 50px;
}

.interaction-card .label-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* 文字左对齐 */
    width: auto;
    overflow: hidden; /* 防止文字溢出 */
    position: relative;
    z-index: 1; /* 文本在图标上层 */
    margin-left: 50px; /* 向右移动，留出更多空间 */
}

.interaction-card .name-cn {
    font-size: 18px; /* 放大文字（原14px） */
    font-weight: bold;
    /* 文本描边效果 - 使用多重阴影模拟 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8),
        0 2px 4px rgba(0,0,0,0.5);
    letter-spacing: 1px;
    line-height: 1.1;
    white-space: nowrap;
}

.interaction-card .name-en {
    font-size: 10px; /* 放大英文（原8px） */
    color: rgba(255,255,255,0.7);
    text-transform: uppercase;
    font-family: 'Bahnschrift', sans-serif;
    line-height: 1;
    margin-top: 2px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    /* 英文也添加描边效果 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8);
}

/* 旧样式清理 */
.interaction-card .name, 
.interaction-card .desc {
    display: none;
}

/* 小类样式 */
.interaction-minor-list {
    margin-top: 2px;
    margin-bottom: 2px;
    margin-left: 15px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.interaction-card.minor-card {
    width: 100px;
    height: 36px; /* 小类高度大幅减小 */
    font-size: 12px;
    background: rgba(50, 50, 60, 0.9);
    border-left-width: 2px;
    padding: 0 8px;
    /* 小类倾斜角度稍小，同样前移防止穿透 */
    transform: rotateY(5deg) translateZ(20px);
    justify-content: center; /* 小类一般居中或者左对齐? 保持左对齐统一 */
    justify-content: flex-start; 
}

.interaction-card.minor-card .name-cn {
    font-size: 16px; /* 比大类小2号（大类18px） */
    /* 小类也添加描边效果 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8),
        0 2px 4px rgba(0,0,0,0.5);
}
.interaction-card.minor-card .name-en {
    font-size: 8px; /* 比大类小2号（大类10px） */
    /* 英文也添加描边效果 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8);
}

/* Ensure minor card flattens when active, overriding the rotated minor-card state */
.interaction-card.minor-card.active {
    transform: rotateY(0deg) translateX(10px) translateZ(20px);
    background: rgba(80, 80, 100, 0.95);
    border-left-color: #fff;
}

/* 浮现按钮（无部位指令）专用样式 */
.interaction-card.floating-instruct {
    background: rgba(4, 28, 44, 0.9); /* 深蓝色背景 */
    border-left-color: #00d2ff;       /* 青色亮边 */
    border-left-width: 3px;
    height: 32px;                     /* 更紧凑 */
    width: 113px;                     /* 增加四分之一（原90px * 1.25）*/
    margin-left: 20px;                /* 更深的缩进 */
    transform: rotateY(0deg) translateZ(20px); /* 浮现按钮不旋转，保持Z深度一致 */
    clip-path: none;                  /* 移除切角，保持方正或自定义 */
    border-radius: 2px;
}

.interaction-card.floating-instruct:hover {
    background: #007acc;
    transform: translateX(5px) translateZ(30px);
}

.interaction-card.floating-instruct .name-cn {
    font-size: 14px; /* 比小类小2号（小类16px） */
    font-weight: normal;
    /* 无部位指令也添加描边效果 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8),
        0 2px 4px rgba(0,0,0,0.5);
}

.interaction-card.floating-instruct .name-en {
    font-size: 6px; /* 比小类小2号（小类8px） */
    /* 英文也添加描边效果 */
    text-shadow: 
        -1px -1px 0 rgba(0,0,0,0.8),
        1px -1px 0 rgba(0,0,0,0.8),
        -1px 1px 0 rgba(0,0,0,0.8),
        1px 1px 0 rgba(0,0,0,0.8);
}

    color: #ccc;
    border: 1px solid #444;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9em;
    text-align: center;
}

.interaction-minor-btn:hover {
    background-color: #3a3a5a;
    border-color: #666;
    color: #fff;
}

.interaction-minor-btn.active {
    background-color: #4a4a7a;
    border-color: #8888ff;
    color: #fff;
    box-shadow: 0 0 8px rgba(136, 136, 255, 0.4);
}

/* 旧版交互类型按钮（向后兼容） */
.interaction-type-btn {
    padding: 8px 12px;
    background-color: #2a2a3a;
    color: #ccc;
    border: 1px solid #444;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9em;
}

.interaction-type-btn:hover {
    background-color: #3a3a4a;
    border-color: #666;
}

.interaction-type-btn.active {
    background-color: #4a4a6a;
    border-color: #8888ff;
    color: #fff;
}

/* 角色立绘显示区 */
.new-ui-character-display {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    /* 用于JS计算可用高度 */
    overflow: visible;
}

/* 角色立绘容器 */
.character-container {
    position: relative;
    /* 使用 flex 让内部元素紧密排列，同时容器尺寸由图片决定 */
    display: inline-flex;
    flex-direction: column;
    /* 容器尺寸由内部图片决定 */
    max-width: 100%;
    max-height: 100%;
    /* 变换时作为参考点 */
    transition: transform 0.2s ease;
    /* 允许身体部位按钮层溢出（裁切调整时需要） */
    overflow: visible;
}

.character-image {
    /* 默认使用容器限制，JS会动态设置高度 */
    max-width: 100%;
    object-fit: contain;
    /* 确保图片不会超出边界 */
    display: block;
}

.character-placeholder {
    color: #666;
    font-size: 1.2em;
    padding: 20px;
    background-color: rgba(30, 30, 40, 0.5);
    border-radius: 8px;
}

/* 身体部位交互层 */
.body-parts-layer {
    position: absolute;
    /* 覆盖整个图片区域 */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

/* 身体部位按钮 */
.body-part-button {
    position: absolute;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    cursor: pointer;
    pointer-events: auto;
    opacity: 0;
    background-color: rgba(136, 136, 255, 0.3);
    border: 2px solid transparent;
    transition: all 0.2s ease;
    min-width: 30px;
    min-height: 30px;
    /* 确保按钮始终是正圆形 */
    aspect-ratio: 1 / 1;
    /* 高度跟随宽度 */
    height: auto !important;
}

.body-part-button:hover {
    opacity: 1;
    background-color: rgba(136, 136, 255, 0.5);
    border-color: rgba(136, 136, 255, 0.8);
    box-shadow: 0 0 10px rgba(136, 136, 255, 0.6);
}

/* 全部位显示模式：始终显示所有部位按钮 */
.body-part-button.always-visible {
    opacity: 0.5;
    animation: body-part-pulse 2s ease-in-out infinite;
}

.body-part-button.always-visible:hover {
    opacity: 1;
    background-color: rgba(136, 136, 255, 0.6);
    border-color: rgba(136, 136, 255, 0.9);
    box-shadow: 0 0 15px rgba(136, 136, 255, 0.8);
}

/* 可交互的身体部位（高亮显示） */
.body-part-button.available {
    opacity: 0.6;
    background-color: rgba(100, 255, 100, 0.4);
    border-color: rgba(100, 255, 100, 0.6);
    animation: body-part-pulse 1.5s ease-in-out infinite;
}

.body-part-button.available:hover {
    opacity: 1;
    background-color: rgba(100, 255, 100, 0.6);
    border-color: rgba(100, 255, 100, 0.9);
    box-shadow: 0 0 15px rgba(100, 255, 100, 0.7);
}

/* 不可交互的身体部位（暗淡显示） */
.body-part-button.unavailable {
    opacity: 0;
    cursor: not-allowed;
    pointer-events: none;
}

/* 身体部位脉冲动画 */
@keyframes body-part-pulse {
    0%, 100% {
        opacity: 0.4;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.7;
        transform: translate(-50%, -50%) scale(1.1);
    }
}

/* 身体部位提示文本 */
.body-part-tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    padding: 4px 8px;
    background-color: rgba(0, 0, 0, 0.85);
    color: #fff;
    font-size: 12px;
    border-radius: 4px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    margin-bottom: 5px;
}

.body-part-button:hover .body-part-tooltip {
    opacity: 1;
}

/* 交互对象信息面板（右侧） */
.new-ui-target-info {
    width: 240px;
    padding: 12px;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    gap: 6px;
    border-radius: 4px;
    max-height: 100%;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.4;
}

.target-name {
    font-size: 1.3em;
    color: #ffd700;
    font-weight: bold;
    text-align: center;
    padding-bottom: 6px;
    border-bottom: 1px solid #444;
    margin-bottom: 4px;
}

/* 好感度/信赖度行 */
.target-relation-row {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
    font-size: 1em;
    color: #ccc;
    border-bottom: 1px solid #333;
}

.target-favorability {
    color: #ff9999;
}

.target-trust {
    color: #99ccff;
}

/* 状态条容器 */
.target-bars {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 4px 0;
}

/* 带背景图片的状态条 */
.target-bars .status-bar {
    display: flex;
    align-items: center;
    gap: 6px;
    height: 18px;
}

.target-bars .bar-label {
    font-size: 0.9em;
    min-width: 32px;
    color: #ccc;
}

.target-bars .bar-track {
    flex: 1;
    height: 10px;
    background-color: rgba(40, 40, 40, 0.8);
    transform: skewX(-20deg);
    border: 1px solid rgba(255, 255, 255, 0.15);
    position: relative;
    overflow: hidden;
}

.target-bars .bar-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    transition: width 0.3s ease;
}

.target-bars .status-bar-hp .bar-track { background-image: none; }
.target-bars .status-bar-hp .bar-fill {
    background-color: #e15a5a;
    background-image: none;
}

.target-bars .status-bar-mp .bar-track { background-image: none; }
.target-bars .status-bar-mp .bar-fill {
    background-color: #70C070;
    background-image: none;
}

.target-bars .bar-value {
    font-size: 0.85em;
    min-width: 70px;
    text-align: right;
    color: #ccc;
}

/* 特殊状态标记行 */
.target-special-states {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    padding: 4px 0;
    border-top: 1px solid #333;
    border-bottom: 1px solid #333;
    line-height: 1.5;
}

.special-state {
    font-size: 1em;
    padding: 1px 2px;
}

/* 状态区块 */
.target-state-section {
    margin-top: 4px;
}

/* ========== 数值变化浮动文本 ========== */
/* ========== 内联浮动文本样式 ========== */
.inline-floating-text {
    position: absolute;
    font-size: 0.9em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    padding: 0 4px;
    white-space: nowrap;
    pointer-events: none;
    z-index: 100;
    animation: inlineFloatUp 0.4s ease-out forwards;
}

/* 状态栏内联显示（位置不变，在右侧） */
.inline-floating-text.position-inline {
    right: 0;
    top: 50%;
    transform: translateY(-50%);
}

/* 数值后面显示（用于状态条类，如体力、气力、理智、精液、好感、信赖等） */
.inline-floating-text.position-end-inline {
    position: static;
    display: inline;
    margin-left: 0;
    padding-left: 0;
    transform: none;
    animation: endInlineFadeIn 0.4s ease-out forwards;
}

/* 体力：显示在体力和气力的中间位置 */
.inline-floating-text.position-hp-middle {
    right: 0;
    top: 100%;
    transform: translateY(0);
}

/* 气力、好感、信赖等：下移一行显示 */
.inline-floating-text.position-below {
    right: 0;
    top: 100%;
    transform: translateY(2px);
}

.inline-floating-text.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

@keyframes inlineFloatUp {
    from {
        opacity: 0;
        transform: translateY(calc(var(--float-start-offset, 0px) + 8px));
    }
    to {
        opacity: 1;
        transform: translateY(var(--float-end-offset, 0px));
    }
}

@keyframes endInlineFadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* ========== 底部浮动文本容器 ========== */
.bottom-floating-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    padding: 4px 0;
    justify-content: flex-start;
    pointer-events: none;
}

.bottom-floating-text {
    font-size: 0.9em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    padding: 2px 6px;
    white-space: nowrap;
    animation: bottomFloatUp 0.4s ease-out forwards;
}

.bottom-floating-container.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

/* ========== 玩家信息栏浮动文本容器 ========== */
.player-floating-container {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 4px 0;
    justify-content: flex-start;
    pointer-events: none;
    margin-top: 4px;
}

.player-floating-text {
    font-size: 0.8em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    padding: 2px 4px;
    white-space: nowrap;
    animation: bottomFloatUp 0.4s ease-out forwards;
}

.player-floating-container.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

@keyframes bottomFloatUp {
    from {
        opacity: 0;
        transform: translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ========== 旧版浮动文本样式（保留兼容） ========== */
.value-changes-container {
    position: absolute;
    top: 50%;
    right: -10px;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 4px;
    pointer-events: none;
    z-index: 100;
}

.floating-value-change {
    font-size: 1em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    padding: 2px 8px;
    white-space: nowrap;
    animation: floatUp 0.5s ease-out forwards;
    opacity: 1;
    transform: translateY(var(--float-offset, 0px));
}

.floating-value-change.positive {
    color: #4cff4c;
}

.floating-value-change.negative {
    color: #ff4c4c;
}

/* 浮动上升动画 */
@keyframes floatUp {
    from {
        opacity: 0;
        transform: translateY(calc(var(--float-offset, 0px) + 10px));
    }
    to {
        opacity: 1;
        transform: translateY(var(--float-offset, 0px));
    }
}

/* 淡出动画 */
.value-changes-container.fade-out {
    animation: fadeOut 0.5s ease-out forwards;
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

.state-section-title {
    color: #888;
    font-size: 1em;
    text-align: center;
    margin-bottom: 4px;
}

/* 状态网格 - 每行2个 */
.state-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 4px;
}

/* 单个状态项 - 改为单行布局 */
.state-item {
    display: flex;
    flex-direction: column;
    gap: 2px;
    padding: 4px;
    background-color: rgba(40, 40, 50, 0.6);
    border-radius: 3px;
}

/* 状态项第一行：标签和数值 */
.state-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.state-label {
    font-size: 0.9em;
    color: #aaa;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.state-value {
    font-size: 0.85em;
    color: #ccc;
    text-align: right;
    white-space: nowrap;
}

/* 状态进度条 - 使用图片背景 */
.state-bar-track {
    height: 10px;
    background-image: url('/image/状态条/statbar_null.png');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    border-radius: 2px;
    overflow: hidden;
}

.state-bar-fill {
    height: 100%;
    background-image: url('/image/状态条/statbar_true.png');
    background-size: auto 100%;
    background-repeat: repeat-x;
    background-color: transparent;
    border-radius: 2px;
    transition: width 0.3s ease;
}

/* ========== 顶部场景信息栏 ========== */
/* 显示在面板选项卡上方，包含场景名（左）和游戏时间（中） */
.new-ui-scene-info-bar {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px 16px 16px 16px;  /* 上内边距12px，下内边距16px，让下方空隙更大且为背景色 */
    background-color: rgba(15, 15, 25, 0.95);
    border-bottom: 1px solid #333;
    font-size: 0.9em;
    width: 100%;
    box-sizing: border-box;
    line-height: 1.5;  /* 增加行高，让文本有更多呼吸空间 */
    position: relative;  /* 用于场景名的绝对定位 */
}

/* 场景名（左侧，绝对定位） */
.scene-info-name {
    color: #88ccff;
    font-weight: normal;
    position: absolute;
    left: 16px;
}

/* 游戏时间（居中） */
.scene-info-time {
    color: #aaa;
    font-weight: normal;
}

/* 顶部面板选项卡栏 - 网页选项卡样式 */
.new-ui-panel-tabs {
    display: flex;
    gap: 0;
    padding: 0;
    background-color: rgba(20, 20, 30, 0.95);
    border-bottom: 2px solid #4a4a5a;
    flex-wrap: wrap;
    justify-content: flex-start;
    width: 100%;
    box-sizing: border-box;
    position: relative;
}

/* 选项卡项 - 网页选项卡样式 */
.panel-tab-btn {
    padding: 10px 20px;
    background-color: transparent;
    color: #aaa;
    border: none;
    border-bottom: 2px solid transparent;
    border-radius: 0;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9em;
    font-weight: normal;
    position: relative;
    margin-bottom: -2px;
}

/* 选项卡悬停效果 */
.panel-tab-btn:hover:not(.disabled):not(.active) {
    background-color: rgba(60, 60, 80, 0.5);
    color: #ddd;
    border-bottom-color: #666;
}

/* 激活状态的选项卡 */
.panel-tab-btn.active {
    background-color: rgba(40, 40, 60, 0.8);
    color: #ffd700;
    border-bottom: 2px solid #ffd700;
    font-weight: bold;
}

/* 禁用状态的选项卡 */
.panel-tab-btn.disabled {
    opacity: 0.4;
    cursor: not-allowed;
    color: #666;
}

/* 主面板选项卡特殊样式 */
.panel-tab-btn.main-tab {
    color: #88ccff;
}

.panel-tab-btn.main-tab.active {
    color: #ffd700;
}

/* ========== 臀部子菜单样式 ========== */
.hip-sub-menu {
    background-color: rgba(30, 30, 40, 0.95);
    border: 1px solid #555;
    border-radius: 8px;
    padding: 10px;
    min-width: 100px;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

.hip-sub-menu-title {
    color: #ffd700;
    font-size: 0.9em;
    padding-bottom: 8px;
    border-bottom: 1px solid #444;
    margin-bottom: 8px;
    text-align: center;
}

.hip-sub-menu-btn {
    display: block;
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 4px;
    background-color: rgba(80, 80, 100, 0.6);
    border: 1px solid #555;
    border-radius: 4px;
    color: #ddd;
    cursor: pointer;
    font-size: 0.85em;
    text-align: left;
    transition: all 0.2s;
}

.hip-sub-menu-btn:hover {
    background-color: rgba(100, 100, 140, 0.8);
    border-color: #88ccff;
    color: #fff;
}

.hip-sub-menu-close {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 20px;
    height: 20px;
    padding: 0;
    background: transparent;
    border: none;
    color: #888;
    font-size: 16px;
    cursor: pointer;
    line-height: 1;
}

.hip-sub-menu-close:hover {
    color: #ff6666;
}

/* ========== 头部子菜单样式 ========== */
.head-sub-menu {
    background-color: rgba(30, 30, 40, 0.95);
    border: 1px solid #555;
    border-radius: 8px;
    padding: 10px;
    min-width: 100px;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

.head-sub-menu-title {
    color: #ffd700;
    font-size: 0.9em;
    padding-bottom: 8px;
    border-bottom: 1px solid #444;
    margin-bottom: 8px;
    text-align: center;
}

.head-sub-menu-btn {
    display: block;
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 4px;
    background-color: rgba(80, 80, 100, 0.6);
    border: 1px solid #555;
    border-radius: 4px;
    color: #ddd;
    cursor: pointer;
    font-size: 0.85em;
    text-align: left;
    transition: all 0.2s;
}

.head-sub-menu-btn:hover {
    background-color: rgba(100, 100, 140, 0.8);
    border-color: #88ccff;
    color: #fff;
}

.head-sub-menu-close {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 20px;
    height: 20px;
    padding: 0;
    background: transparent;
    border: none;
    color: #888;
    font-size: 16px;
    cursor: pointer;
    line-height: 1;
}

.head-sub-menu-close:hover {
    color: #ff6666;
}

/* ========== 指令选择菜单样式 ========== */
.instruct-menu {
    background-color: rgba(30, 30, 40, 0.95);
    border: 2px solid #ffd700;
    border-radius: 12px;
    padding: 15px;
    min-width: 200px;
    max-width: 300px;
    z-index: 1001;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
}

.instruct-menu-title {
    color: #ffd700;
    font-size: 1.1em;
    font-weight: bold;
    padding-bottom: 12px;
    border-bottom: 1px solid #ffd700;
    margin-bottom: 12px;
    text-align: center;
}

.instruct-menu-container {
    max-height: 400px;  /* 约8个按钮的高度 (8 * 46px) */
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 5px;  /* 为滚动条留出空间 */
}

/* 滚动条样式 */
.instruct-menu-container::-webkit-scrollbar {
    width: 8px;
}

.instruct-menu-container::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
}

.instruct-menu-container::-webkit-scrollbar-thumb {
    background: rgba(255, 215, 0, 0.5);
    border-radius: 4px;
}

.instruct-menu-container::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 215, 0, 0.7);
}

.instruct-menu-btn {
    display: block;
    width: 100%;
    padding: 10px 15px;
    margin-bottom: 6px;
    background-color: rgba(60, 60, 80, 0.7);
    border: 1px solid #666;
    border-radius: 6px;
    color: #ddd;
    cursor: pointer;
    font-size: 0.95em;
    text-align: center;
    transition: all 0.2s;
}

.instruct-menu-btn:hover {
    background-color: rgba(80, 80, 120, 0.9);
    border-color: #88ccff;
    color: #fff;
    transform: scale(1.02);
}

.instruct-menu-btn:last-child {
    margin-bottom: 0;
}

/* ========== 无部位指令浮现按钮样式 ========== */
.interaction-floating-buttons {
    display: none;  /* 默认隐藏，有内容时通过JS显示 */
    flex-direction: column;
    flex-wrap: wrap;
    gap: 6px;
    padding: 8px;
    /* 使用视口高度限制，因为父容器可能没有固定高度 */
    max-height: min(calc(100vh - 200px), 700px);  /* 限制高度，超出换列 */
    height: fit-content;
    align-content: flex-start;
    background-color: rgba(30, 30, 45, 0.85);
    border-radius: 8px;
    overflow: visible;  /* 允许内容溢出换列 */
    /* 绝对定位，不影响角色立绘大小 */
    position: absolute;
    left: 148px;  /* 交互面板宽度(140px) + 间距(8px) */
    top: 8px;
    z-index: 10;
}

/* 浮现按钮 */
.floating-instruct-btn {
    padding: 10px 14px;
    background-color: #3a3a5a;
    color: #ddd;
    border: 1px solid #6666aa;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.9em;
    text-align: center;
    white-space: nowrap;
    min-width: 80px;
    max-width: 120px;
    text-overflow: ellipsis;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(100, 100, 180, 0.3);
}

.floating-instruct-btn:hover {
    background-color: #4a4a7a;
    border-color: #8888ff;
    color: #fff;
    transform: translateX(2px);
    box-shadow: 0 4px 12px rgba(136, 136, 255, 0.4);
}

.floating-instruct-btn:active {
    background-color: #5a5a9a;
    transform: translateX(0);
    box-shadow: 0 2px 6px rgba(136, 136, 255, 0.3);
}

/* ========== 对话框区域样式 ========== */
/* 对话框容器 - 位于画面最下方 */
.new-ui-dialog-box {
    position: relative;
    width: 100%;
    min-height: 120px;
    padding: 15px 20px;
    background: linear-gradient(180deg, rgba(20, 20, 40, 0.85) 0%, rgba(30, 30, 50, 0.95) 100%);
    border-top: 2px solid #4a4a6a;
    box-sizing: border-box;
    display: none;  /* 默认隐藏，有内容时显示 */
    flex-direction: column;
    gap: 8px;
    cursor: pointer;  /* 点击推进 */
    transition: all 0.3s ease;
}

/* 对话框可见状态 */
.new-ui-dialog-box.visible {
    display: flex;
}

/* 说话者名称区域 */
.dialog-speaker-container {
    display: flex;
    align-items: center;
    gap: 12px;
}

.dialog-speaker-name {
    font-size: 1.1em;
    font-weight: bold;
    color: #ffd700;
    padding: 4px 12px;
    background-color: rgba(100, 80, 40, 0.6);
    border: 1px solid #aa8844;
    border-radius: 4px;
    display: inline-block;
}

/* 对话文本区域 */
.dialog-text-container {
    flex: 1;
    padding: 8px 0;
    line-height: 1.6;
    font-size: 1.05em;
    color: #e8e8e8;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/* 不同颜色风格的对话文本 */
.dialog-text-container.style-standard {
    color: #e8e8e8;
}

.dialog-text-container.style-gold {
    color: #ffd700;
}

/* 角色专属颜色通过JavaScript动态设置 */

/* 对话框底部提示 */
.dialog-hint {
    text-align: right;
    font-size: 0.85em;
    color: #888;
    font-style: italic;
    padding-top: 4px;
}

/* 点击推进动画 */
.dialog-hint-icon {
    display: inline-block;
    animation: dialog-blink 1s ease-in-out infinite;
}

@keyframes dialog-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

/* 对话框悬停效果 */
.new-ui-dialog-box:hover {
    background: linear-gradient(180deg, rgba(25, 25, 50, 0.9) 0%, rgba(40, 40, 60, 0.98) 100%);
}

/* 快速跳过模式下的对话框样式 */
.new-ui-dialog-box.skipping {
    opacity: 0.7;
    transition: opacity 0.1s ease;
}

.new-ui-dialog-box.skipping .dialog-hint {
    display: none;
}

/* 隐藏状态下的对话框 */
.new-ui-dialog-box.hidden {
    display: none;
}

/* ========== 特殊状态颜色样式 ========== */
/* 对应 character_info_head.py 中的 draw.style 值 */

.special-state.style-standard {
    color: #c8c8c8;
}

.special-state.style-spring_green {
    color: #00ff7f;
}

.special-state.style-coral {
    color: #ff7f50;
}

.special-state.style-red {
    color: #ff4444;
}

.special-state.style-beige {
    color: #f5f5dc;
}

.special-state.style-khaki {
    color: #f0e68c;
}

.special-state.style-little_dark_slate_blue {
    color: #7b68ee;
}

.special-state.style-light_pink {
    color: #ffb6c1;
}

.special-state.style-rose_pink {
    color: #ff66b2;
}

.special-state.style-crimson {
    color: #dc143c;
}

.special-state.style-light_sky_blue {
    color: #87cefa;
}

.special-state.style-deep_gray {
    color: #666666;
}

.special-state.style-hot_pink {
    color: #ff69b4;
}

/* 催眠程度颜色 */
.special-state.style-hypnosis_low {
    color: #90ee90;
}

.special-state.style-hypnosis_mid {
    color: #ffff00;
}

.special-state.style-hypnosis_high {
    color: #ffa500;
}

.special-state.style-hypnosis_max {
    color: #ff4500;
}

/* ========== 可选部位打印区 ========== */
.target-body-parts-section {
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid rgba(100, 100, 100, 0.4);
}

/* 部位显示网格 - 每行2个 */
.body-parts-display-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 4px;
    margin-top: 4px;
}

/* 单个部位显示项 */
.body-part-display-item {
    padding: 6px 8px;
    background-color: rgba(100, 150, 255, 0.15);
    border: 1px solid rgba(100, 150, 255, 0.4);
    border-radius: 4px;
    color: #a8c8ff;
    font-size: 0.9em;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.body-part-display-item:hover {
    background-color: rgba(100, 150, 255, 0.3);
    border-color: rgba(100, 150, 255, 0.7);
    color: #c8e0ff;
    box-shadow: 0 0 6px rgba(100, 150, 255, 0.4);
}